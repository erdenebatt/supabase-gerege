############
# Secrets
# YOU MUST CHANGE THESE BEFORE GOING INTO PRODUCTION
# Run: ./scripts/generate-secrets.sh to auto-generate
############

# PostgreSQL
POSTGRES_PASSWORD=your-super-secret-and-long-postgres-password
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=postgres

# JWT — Must be at least 32 characters. Used to sign and verify JWTs.
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long

# Supabase API Keys — Generated from JWT_SECRET using generate-secrets.sh
# These are JWTs signed with the JWT_SECRET above
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=this_password_is_insecure_and_should_be_updated

############
# Server / Domain
############

SITE_URL=https://supabase.gerege.mn
API_EXTERNAL_URL=https://supabase.gerege.mn
SUPABASE_PUBLIC_URL=https://supabase.gerege.mn
SERVER_IP=38.180.242.174

############
# Studio
############

STUDIO_DEFAULT_ORGANIZATION=Gerege
STUDIO_DEFAULT_PROJECT=Gerege Supabase
STUDIO_PORT=3000
SUPABASE_STUDIO_PORT=3000

############
# GoTrue (Auth)
############

GOTRUE_SITE_URL=https://supabase.gerege.mn
GOTRUE_URI_ALLOW_LIST=
GOTRUE_DISABLE_SIGNUP=false

GOTRUE_JWT_ADMIN_ROLES=service_role
GOTRUE_JWT_AUD=authenticated
GOTRUE_JWT_DEFAULT_GROUP_NAME=authenticated
GOTRUE_JWT_EXP=3600
GOTRUE_JWT_SECRET=${JWT_SECRET}

# External OAuth — configure as needed
GOTRUE_EXTERNAL_EMAIL_ENABLED=true
GOTRUE_EXTERNAL_PHONE_ENABLED=false
GOTRUE_EXTERNAL_APPLE_ENABLED=false
GOTRUE_EXTERNAL_AZURE_ENABLED=false
GOTRUE_EXTERNAL_FACEBOOK_ENABLED=false
GOTRUE_EXTERNAL_GITHUB_ENABLED=false
GOTRUE_EXTERNAL_GITLAB_ENABLED=false
GOTRUE_EXTERNAL_GOOGLE_ENABLED=false
GOTRUE_EXTERNAL_TWITTER_ENABLED=false

# SMTP — Required for email auth (magic links, confirmations)
GOTRUE_SMTP_HOST=smtp.example.com
GOTRUE_SMTP_PORT=587
GOTRUE_SMTP_USER=your-smtp-user
GOTRUE_SMTP_PASS=your-smtp-password
GOTRUE_SMTP_SENDER_NAME=Gerege Auth
GOTRUE_SMTP_ADMIN_EMAIL=admin@gerege.mn
GOTRUE_MAILER_AUTOCONFIRM=false

############
# Database Connection Strings
############

# Direct connection (bypasses connection pooler)
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

############
# Supavisor (Connection Pooling)
############

POOLER_DEFAULT_POOL_SIZE=20
POOLER_MAX_CLIENT_CONN=200
POOLER_TENANT_ID=default-tenant

############
# PostgREST
############

PGRST_DB_SCHEMAS=public,graphql_public
PGRST_DB_ANON_ROLE=anon
PGRST_DB_USE_LEGACY_GUCS=false
PGRST_APP_SETTINGS_JWT_SECRET=${JWT_SECRET}
PGRST_APP_SETTINGS_JWT_EXP=${GOTRUE_JWT_EXP}

############
# Realtime
############

REALTIME_IP_VERSION=IPv4
REALTIME_SECURE_CHANNELS=true

############
# Storage
############

STORAGE_BACKEND=file
STORAGE_FILE_BACKEND_PATH=/var/lib/storage
STORAGE_S3_BUCKET=
STORAGE_S3_ENDPOINT=
STORAGE_S3_REGION=

# Upload limits
FILE_SIZE_LIMIT=52428800
STORAGE_FILE_SIZE_LIMIT=52428800

############
# Kong
############

KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

############
# Analytics / Logging
############

LOGFLARE_API_KEY=your-logflare-api-key
LOGFLARE_LOGGER_BACKEND_API_KEY=your-logflare-api-key

############
# Functions
############

FUNCTIONS_VERIFY_JWT=false

############
# Imgproxy
############

IMGPROXY_ENABLE_WEBP_DETECTION=true

############
# Firewall — IPs allowed to connect directly to PostgreSQL (port 5432)
# Comma-separated list used by scripts/firewall-setup.sh
############

ALLOWED_DB_IPS=elite-gerege-ip,other-server-ip
